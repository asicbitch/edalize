#Auto generated by Edalize

set ::env(DESIGN_NAME) {{top}}

set ::env(VERILOG_FILES) [list {{file_table}}]

# Setting defauls for running all parts of the flow
# The later sourced user-provided params.tcl can
# override
set ::env(RUN_SYNTHESIS) 1
set ::env(RUN_FLOORPLAN) 1
set ::env(RUN_PLACEMENT) 1
set ::env(RUN_CTS) 1
set ::env(RUN_ROUTING) 1
set ::env(RUN_POWERED_VERILOG) 1
set ::env(RUN_MAGIC) 1
set ::env(RUN_DRC) 1
set ::env(RUN_LVS) 1
set ::env(RUN_ANTENNA) 1
set ::env(REPORT) 1

{% if blackbox_table != "" %}
set ::env(VERILOG_FILES_BLACKBOX) [list {{blackbox_table}}]
{% endif %}

{% if lefs_table != "" %}
set ::env(EXTRA_LEFS) [list {{lefs_table}}]
{% endif %}

{% if gds_table != "" %}
set ::env(EXTRA_GDS_FILES) [list {{gds_table}}]
{% endif %}

{% if mag_table != "" %}
set ::env(MAG_FILES) [list {{mag_table}}]
{% endif %}

{% if tcl_pdn != "" %}
set ::env(PDN_CFG) {{tcl_pdn}}
{% endif %}

{% if pin_order != "" %}
set ::env(FP_PIN_ORDER_CFG) {{pin_order}}
{% endif %}

{% if fp_context_def != "" %}
set ::env(FP_CONTEXT_DEF) {{fp_context_def}}
{% endif %}

{% if fp_context_lef != "" %}
set ::env(FP_CONTEXT_LEF) {{fp_context_lef}}
{% endif %}

{% if fp_def_template != "" %}
set ::env(FP_DEF_TEMPLATE) {{fp_def_template}}
{% endif %}

{% if macro_placement != "" %}
set ::env(MACRO_PLACEMENT_CFG) {{macro_placement}}
{% endif %}

{% if tcl_params != "" %}
source {{tcl_params}}
{% endif %}

{% if tcl != "" %}
set tcl [list {{tcl}}]
set filename $::env(PDK)_$::env(STD_CELL_LIBRARY)_config.tcl

# Right now we treat otherwise unspecified tcl files as potential special rules for a cell library
# So if we find a matching one for the current PDK/STD_CELL_LIBRARY, we source it
foreach x $tcl {
    if { [string match *$filename $x] } {
        source $x
        break
    }
}
{% endif %}